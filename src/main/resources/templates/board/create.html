<html layout:decorate="~{usr/layout/layout.html}">

<head>
    <title>게시판 작성</title>
    <!-- Kakao 우편번호 서비스 -->
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
</head>

<body>
<header layout:fragment="header">
    <div class="navbar max-w-2xl mx-auto bg-base-100">
        <div class="navbar-start">
            <div class="dropdown">
                <a href="#" tabindex="0" class="btn btn-ghost btn-circle" onclick="history.back()">
                    <i class="fa-solid fa-angle-left"></i>
                </a>
            </div>
        </div>
        <div class="navbar-center">
            <a class="font-black">게시글 작성</a>
        </div>
        <div class="navbar-end">
            <button class="btn btn-ghost btn-circle hidden">
                <i class="fa-solid fa-ellipsis-vertical"></i>
            </button>
        </div>
    </div>
</header>

<main layout:fragment="main">
    <div class="text-center">
        <form th:object="${createBoard}" th:action method="POST">
            <div class="mt-5">
                <input class="input input-bordered input-md w-full max-w-xs" th:field="*{title}" type="text" placeholder="제목"><br>
                <span th:if="${#fields.hasErrors('title')}" th:errors="*{title}" class="text-error"></span>
            </div>

            <div class="mt-5">
                <label class="btn bg-main btn-active" th:each="type : ${boardTypes}" onclick="changeColor(event)">
                    <input class="sr-only" type="radio" th:field="*{boardType}" th:value="${type}" th:text="${type}">
                </label><br>
                <span th:if="${#fields.hasErrors('boardType')}" th:errors="*{boardType}" class="text-error"></span>
            </div>
            <div class="mt-5">
                <label class="btn bg-main btn-active" th:each="type : ${tradeTypes}"onclick="changeColor(event)">
                    <input class="sr-only" type="radio" th:field="*{tradeType}" th:value="${type}" th:text="${type}">
                </label><br>
                <span th:if="${#fields.hasErrors('tradeType')}" th:errors="*{tradeType}" class="text-error"></span>
            </div>
            <div class="mt-5">
                <textarea class="textarea textarea-bordered textarea-lg w-full max-w-xs" th:field="*{content}" maxlength="30" placeholder="내용"></textarea><br>
                <span th:if="${#fields.hasErrors('content')}" th:errors="*{content}" class="text-error"></span>
            </div>
            <div class="mt-5">
                <input class="input input-bordered" type="number" th:field="*{rewardCoin}" placeholder="거래할 코인을 입력해주세요."><br>
                <span th:if="${#fields.hasErrors('rewardCoin')}" th:errors="*{rewardCoin}" class="text-error"></span>
            </div>
            <div class="mt-10 mx-auto w-1/2 text-center">
                <input type="text" class="input input-bordered form-control" id="address_kakao" th:field="*{address}"
                       placeholder="주소(지번 또는 도로명)를 입력하세요. ex) 서울특별시 성북구 종암로 10길" readonly><br>
                <span th:if="${#fields.hasErrors('address')}" th:errors="*{address}" class="text-error"></span>
            </div>

            <div class="mt-5">
                <input type="submit" value="작성" class="btn btn-active">
            </div>
        </form>
    </div>

    <script th:inline="javascript">
        // 카카오 우편 서비스
        window.onload = function() {
            document.getElementById("address_kakao").addEventListener("click", function(){

                new daum.Postcode({
                    oncomplete: function(data) {
                        document.getElementById("address_kakao").value = data.address;
                    }
                }).open();
            });
        }

        function changeColor(event) {
            // 모든 label 요소를 가져와 active 클래스를 제거합니다.
            var labels = document.querySelectorAll("label");
            labels.forEach(function(label) {
                label.classList.remove("active");
            });

            // 클릭한 label에 active 클래스를 추가합니다.
            event.currentTarget.classList.add("active");
        }
    </script>
</main>

</body>

</html>